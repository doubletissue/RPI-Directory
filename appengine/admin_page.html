
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>RPI Directory</title>
		<link href='http://fonts.googleapis.com/css?family=Puritan:700' rel='stylesheet' type='text/css'>
		<link href='css/main.css' rel='stylesheet' type='text/css'>
		<style type="text/css">
		    .clearButton { 
				width: 30%;
				text-align: center;
				margin-left:auto;
				margin-right:auto;
				margin-bottom: 3em;
				margin-top: 3em;
			}
			
			button{
				width: 40px;
			}
		 </style>
		<script type="text/javascript" language="javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
		<script type="text/javascript">
		  $(document).ready(function() {
			$("#memcache").click(function(){
				$.ajax({
			     type: "GET",
			     url: "/admin_page?flushcache=hi",
			     async: false,
				 success: function(data){ alert("Cache flushed!"); },
			   });
			});
			
			$("#counter").click(function(){
				$.ajax({
			     type: "GET",
			     url: "/admin_page?resetpos=hi",
			     async: false,
				 success: function(data){ alert("Position reset!"); },
			    });
			});
			
			// MemCache stats
			$.ajax({
		     type: "GET",
		     url: "/admin_page?getstats=hi",
		     async: true,
		     dataType: "json",
			 success: function(data){
			     $("#stats").html("Cache Hits: " + data.hits + "<br>Cache Misses: " + data.misses + "<br>Number Items: " + data.items + "<br>Total bytes: " + data.bytes + "<br>Index MC: " + data.indexmc + "<br>Index DS: " + data.indexds);
		       },
		    });
			
		  });
		</script>
		</head>
		<body id="body">
		  <div class="full_width big">RPI Directory</div>
		  <div class="clearButton" id="memcache"><input type="button" name="keyword" id="keyword" value="Clear MemCache"/></div>
		  <div class="clearButton" id="counter"><input type="button" name="keyword" id="keyword" value="Reset Counter"/></div>
		  <div id="stats">MemCache Stats:</div>
		</body>
</html>