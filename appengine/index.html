
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<title>RPI Directory</title>
		<style type="text/css" title="currentStyle">
			@import "css/demo_page.css";
			@import "css/demo_table.css";
		</style>
		<script type="text/javascript" language="javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
		<script type="text/javascript" charset="utf-8">
		var last_known_query = "";
		$(document).ready(function() {
			$("#keyword").keyup(function(event) {
			  var keyword = $("#keyword").val();
			  if ( event.which == 13 ) {
			     event.preventDefault();
			  }
			  
			  if (keyword != ''){
				  $.ajax({
				     type: "GET",
				     url: "/api?name=" + encodeURI(keyword.toLowerCase()),
				     async: true,
				 	 dataType: "json",
					 success: function(data){
						if (data !== [] && data.length > 0){		
						 $("#results").empty();	
						 $.each(data, function(i, person){
					       $("#results").append("<li>" + person.name + " - " + person.class + " -  " + person.major +  "</li>");
						 });
						 $("#output").text("Results for: " + keyword);
						 last_known_query = keyword;
						}else{
							if (last_known_query != '')
							$("#output").text("Nothing found for " + keyword + ", showing results for " + last_known_query);
							else $("#output").text("Nothing found for " + keyword);
						}
					 }
				   });
			  }else{
				$("#output").text("Type something above silly!");
			}
	      });					
		});
	    </script>
		</head>
		<body id="dt_example">
			<div id="container">
				<div class="full_width big">
					RPI Directory
				</div>

				<h1>Preamble</h1>
				<p>Making an RPI Directory that's fast and always available!</p>

				<h1>Search</h1>
				  <input type="text" name="keyword" id="keyword" />
			      <div id="output">Type something above silly!</div>
				<ul id="results"></ul>	
			</div>
		</body>
</html>